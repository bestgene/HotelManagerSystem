<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>退房充值</title>
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet" href="layui\css\layui.css" media="all">
<link rel="icon" type="image/png" href="assets/i/favicon.png">
<link rel="apple-touch-icon-precomposed"
	href="assets/i/app-icon72x72@2x.png">
<meta name="apple-mobile-web-app-title" content="Amaze UI" />
<link rel="stylesheet" href="assets/css/amazeui.min.css" />
<link rel="stylesheet" href="assets/css/admin.css">
<link rel="stylesheet" href="assets/css/app.css">
<script type="text/javascript" src="/assets/js/jquery.min.js"></script>
</head>
<body>
	<header class="am-topbar am-topbar-inverse admin-header">
		<div class="am-topbar-brand">
			<a href="javascript:;" class="tpl-logo"> <img
				src="assets/img/logo.png" alt="">
			</a>
		</div>

		<div class="am-collapse am-topbar-collapse" id="topbar-collapse">
			<ul
				class="am-nav am-nav-pills am-topbar-nav am-topbar-right admin-header-list tpl-header-list">
				<li><a href="login.html" class="tpl-header-list-link"><span
						class="am-icon-sign-out tpl-header-list-ico-out-size"></span></a></li>
			</ul>
		</div>

	</header>

	<div class="tpl-page-container tpl-page-header-fixed">
		<div class="tpl-left-nav tpl-left-nav-hover">
			<div class="tpl-left-nav-title">酒店系统</div>
			<div class="tpl-left-nav-list">
				<ul class="tpl-left-nav-menu">
					<li class="tpl-left-nav-item"><a href="javascript:;"
						class="nav-link tpl-left-nav-link-list active"> <i
							class="am-icon-home"></i> <span>入住退房</span> <i
							class="am-icon-angle-right tpl-left-nav-more-ico am-fr am-margin-right tpl-left-nav-more-ico-rotate"></i>
					</a>
						<ul class="tpl-left-nav-sub-menu">
							<li><a href="form-line.html"> <i
									class="am-icon-angle-right"></i> <span>入住登记</span>
							</a> <a href="employee-see.html" class="active"> <i
									class="am-icon-angle-right"></i> <span>退房充值</span>
							</a></li>
						</ul></li>
					<li class="tpl-left-nav-item"><a href="javascript:;"
						class="nav-link tpl-left-nav-link-list"> <i
							class="am-icon-bar-chart"></i> <span>房间管理</span> <i
							class="am-icon-angle-right tpl-left-nav-more-ico am-fr am-margin-right tpl-left-nav-more-ico-rotate"></i>
					</a>
						<ul class="tpl-left-nav-sub-menu">
							<li><a href="main.html"> <i class="am-icon-angle-right"></i>
									<span>剩余房源</span>
							</a> <a href="tupian.html"> <i class="am-icon-angle-right"></i> <span>轮播管理</span>
							</a> <a href="uplodaImg.html"> <i class="am-icon-angle-right"></i>
									<span>更新图片</span>
							</a></li>
						</ul></li>
					<li class="tpl-left-nav-item">
						<!-- 打开状态 a 标签添加 active 即可   --> <a href="javascript:;"
						class="nav-link tpl-left-nav-link-list "> <i
							class="am-icon-table"></i> <span>会员管理</span> <!-- 列表打开状态的i标签添加 tpl-left-nav-more-ico-rotate 图表即90°旋转  -->
							<i
							class="am-icon-angle-right tpl-left-nav-more-ico am-fr am-margin-right tpl-left-nav-more-ico-rotate"></i>
					</a>
						<ul class="tpl-left-nav-sub-menu">
							<li><a href="HuiYuanZhuCe.html"> <i
									class="am-icon-angle-right"></i> <span>会员注册</span>
							</a> <a href="commentMann.html"> <i class="am-icon-angle-right"></i>
									<span>会员评论</span>
							</a></li>
						</ul>
					</li>
					<li class="tpl-left-nav-item"><a href="chart.html"
						class="nav-link tpl-left-nav-link-list"> <i
							class="am-icon-wpforms"></i> <span>查看账目</span>
					</a></li>
					<li class="tpl-left-nav-item"><a href="e-check.html"
						class="nav-link tpl-left-nav-link-list"> <i
							class="am-icon-key"></i> <span>签到打卡</span>
					</a></li>
				</ul>
			</div>
		</div>

		<div class="tpl-content-wrapper">
			<ol class="am-breadcrumb">
				<li><a href="index.html" class="am-icon-home">首页</a></li>
				<li><a href="#">入住退房</a></li>
				<li class="am-active">退房 充值</li>
			</ol>
			<div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
				<div class="layui-btn-group demoTable">
					<button class="layui-btn" data-type="getCheckData">获取选中行数据</button>
					<button class="layui-btn" data-type="getCheckLength">获取选中数目</button>
					<button class="layui-btn" data-type="isAll">验证是否全选</button>
				</div>

				<div id="order_table"></div>

			</div>
		</div>
	</div>

	<script src="layui/layui.js" charset="utf-8"></script>
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/amazeui.min.js"></script>
	<script src="assets/js/app.js"></script>

	<script type="text/html" id="barDemo">
  <a class="layui-btn layui-btn-xs" lay-event="edit">充值</a>
  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">退房</a>
</script>
	<script type="text/javascript">
		function showOrder() {
			$.ajax({
				url:"order/showAllOrder",
				type:"POST",
				data:{
				
				},
				success:function(data){
					var content=
				'<table class="layui-table" id="order_table">'
					+'<thead>'
					+'<tr>'
					+'<th>订单编号</th>'
					+'<th>用户名</th>'
					+'<th>身份证号码</th>'
					+'<th>联系方式</th>'
					+'<th>订单金额</th>'

					+'<th>入住时间</th>'
					+'<th>离开时间</th>'
					+'<th>住房类型</th>'
					+'<th>房间号</th>'
					+'<th>订单状态</th>'
					+'<th>操作</th>'
					+'</tr>'
					+'</thead>';
					for(var i=0;i<data.length;i++){
						var items=data[i].items;
						var state="";
						if(data[i].flag==0){
						state="失效"
						}else if(data[i].order_state==1 && data[i].flag==1){
							state="预定"
						}else if(data[i].order_state==2 && data[i].flag==1){
							state="入住"
						}else if(data[i].order_state==3 && data[i].flag==2){
							state="退房"
						}
						content+='<tr>'
						+'<th>'+data[i].order_number+'</th>'
						+'<th>'+data[i].userInfo.user_info_name+'</th>'
						+'<th>'+data[i].userInfo.user_info_idcard+'</th>'
						+'<th>'+data[i].userInfo.user_info_tel+'</th>'
						+'<th>'+data[i].order_totalpay+'</th>'
						+'<th>'+state+'</th>'
						+'<th>'+data[i].order_message+'</th>'
						+'</tr>'
					
						for(var x=0;x<items.length;x++){
							'<tr>'
							+'<th>'+items[x].item_checkintime+'</th>'
							+'<th>'+items[x].item_checkouttime+'</th>'
							+'<th>'+items[x].house.houseType.house_type_name+'</th>'
							+'<th>'+items[x].house.house_name+'</th>'
							+'<th>'+"<button onclik=deleteOrder("+data[i].order_number+")>取消订单</button>"+'</th>'
						+'</tr>'
						}
					}
					content=content+"</table>";
				
				$("#order_table").html(content);
			}
		})
	};
	
	
			
		
		
	</script>


</body>
</html>