<!-- 王亚钱用于查询房源 他人请另存-->
<!doctype html>
<html>

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>剩余房间</title>
<meta name="description" content="这是一个 index 页面">
<meta name="keywords" content="index">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="renderer" content="webkit">
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="icon" type="image/png" href="assets/i/favicon.png">
<link rel="apple-touch-icon-precomposed"
	href="assets/i/app-icon72x72@2x.png">
<meta name="apple-mobile-web-app-title" content="Amaze UI" />
<link rel="stylesheet" href="assets/css/amazeui.min.css" />
<link rel="stylesheet" href="assets/css/admin.css">
<link rel="stylesheet" href="assets/css/app.css">
<script src="assets/js/jquery.min.js"></script>
</head>

<body data-type="generalComponents">


	<header class="am-topbar am-topbar-inverse admin-header">
		<div class="am-topbar-brand">
			<a href="javascript:;" class="tpl-logo"> <img
				src="assets/img/logo.png" alt="">
			</a>
		</div>
	</header>


	<div class="tpl-page-container tpl-page-header-fixed">
		<div class="tpl-left-nav tpl-left-nav-hover">
			<div class="tpl-left-nav-title">酒店系统</div>
			<div class="tpl-left-nav-list">
				<ul class="tpl-left-nav-menu">
					<li class="tpl-left-nav-item">
					<a href="form-line.html" class="nav-link active"> 
					<i class="am-icon-home"></i> 
					<span>入住登记</span>
					</a></li>
					<li class="tpl-left-nav-item"><a href="table-font-list.html" class="nav-link tpl-left-nav-link-list"> 
						<i class="am-icon-bar-chart"></i> 
						<span>剩余房源</span>
					</a></li>
					<li class="tpl-left-nav-item">
						<!-- 打开状态 a 标签添加 active 即可   --> 
						<a href="javascript:;" class="nav-link tpl-left-nav-link-list "> 
						<i class="am-icon-table"></i> 
						<span>会员管理</span> 
						<!-- 列表打开状态的i标签添加 tpl-left-nav-more-ico-rotate 图表即90°旋转  -->
					</a></li>
					<li class="tpl-left-nav-item">
					<a href="chart.html" class="nav-link tpl-left-nav-link-list"> 
					<i class="am-icon-wpforms"></i> 
					<span>查看账目</span>
					</a></li>
					<li class="tpl-left-nav-item"><a href="table-font-list3.html" class="nav-link tpl-left-nav-link-list"> 
						<i class="am-icon-bar-chart"></i> 
						<span>员工信息管理</span>
					</a></li>
					
				</ul>
			</div>
		</div>

	<div class="tpl-content-wrapper">
		<div class="tpl-content-page-title">查找如下：</div>
		<input type="text" style="border: 1px solid black" id="uname" placeholder="预定人姓名"/>
								<button id="search">搜索</button>
		<div class="tpl-portlet-components">
			<div class="portlet-title">
				<div class="tpl-portlet-input tpl-fz-ml">
					<div class="portlet-input input-small input-inline"></div>
				</div>
				<div class="tpl-block">
					<div class="am-g">
						<div class="am-u-sm-12 am-u-md-6">
							<div class="am-btn-toolbar"></div>
						</div>
						<div class="am-u-sm-12 am-u-md-3">
							<div class="am-form-group">
							<!-- 二级联动 -->
								<select id="roomtype" data-am-selected="{btnSize: 'sm'}" onchange="change(this.value)" >
									<option value="0" selected="selected">所有</option>
									<option value="1">标准间</option>
									<option value="2">大床房</option>
									<option value="3">总统套房</option>
								</select>
								
							</div>
							
						</div>
						<div class="am-u-sm-12 am-u-md-3"></div>
					</div>
					<div class="am-g">
						<div class="am-u-sm-12">
							<form class="am-form">
								<table id="room"
									class="am-table am-table-striped am-table-hover table-main">
									<thead>
										<tr id="first">

											<th class="table-id">房号</th>
											<th class="table-title">类型</th>
											<th class="table-type">价格</th>
											<th class="table-set">状态</th>
										</tr> 
									</thead>

								</table>
								<div class="am-cf">

									<!-- <div class="am-fr">
										<ul class="am-pagination tpl-pagination">
											<li class="am-disabled"><a href="#">«</a></li>
											<li class="am-active"><a href="#">1</a></li>
											<li><a href="#">2</a></li>
											<li><a href="#">3</a></li>
											<li><a href="#">4</a></li>
											<li><a href="#">5</a></li>
											<li><a href="#">»</a></li>
										</ul>
									</div> -->
								</div>
								<hr>

							</form>
						</div>

					</div>
				</div>
				<div class="tpl-alert"></div>
			</div>

		</div>

	</div>

</div>

	<script src="assets/js/amazeui.min.js"></script>
	<script src="assets/js/app.js"></script>
</body>



<script type="text/javascript">
<!-- 显示房源-->
$(function() {
	var tr=$("#room").find("#first");
	if (tr.length==0) {
		$("#room").append("<tr id=\"first\"><th class=\"table-id\">房号</th><th class=\"table-title\">类型</th><th class=\"table-type\">价格</th><th class=\"table-set\">状态</th></tr>");
	}
	$.get("room", function(data) {
		
		var arr = JSON.parse(data);
		for (var i = 0; i < arr.length; i++) {
			var str = "";//定义用于拼接的字符串	     
			//拼接表格的行和列
			str = "<tr class='node'><td>" + arr[i].id + "</td><td>" + arr[i].type
					+ "</td><td>" + arr[i].price + "</td><td>"
					+ arr[i].state + "</td></tr>";
			//追加到table中
			$("#room").append(str);
		}

	}, "text");
});
<!-- 二级联动 -->
function change(value) {
	
	var tr=$("#room").find("#first");
	if (tr.length==0) {
		$("#room").append("<tr id=\"first\"><th class=\"table-id\">房号</th><th class=\"table-title\">类型</th><th class=\"table-type\">价格</th><th class=\"table-set\">状态</th></tr>");
	}
	if (value=="0") {
		$.get("room", function(data) {
			var arr = JSON.parse(data);
			for (var i = 0; i < arr.length; i++) {
				var str = "";//定义用于拼接的字符串	     
				//拼接表格的行和列
				str = "<tr class='node'><td>" + arr[i].id + "</td><td>" + arr[i].type
						+ "</td><td>" + arr[i].price + "</td><td>"
						+ arr[i].state + "</td></tr>";
				//追加到table中
				$("#room").append(str);
			}

		}, "text");	
	}
	
	$("#room").find(".node").remove().end();
	var json={"typeid":value};
	$.get("room",json,function(data){		
		var arr = JSON.parse(data);	
		var str = "";//定义用于拼接的字符串					
		for (var i = 0; i < arr.length; i++) {				
			//拼接表格的行和列			
			str = "<tr class='node'><td>" + arr[i].id + "</td><td>" + arr[i].type
					+ "</td><td>" + arr[i].price + "</td><td>"
					+ arr[i].state + "</td></tr>";
			//追加到table中
			$("#room").append(str);
		}
	},"text");	
}
 //查询预定数据
$(function() {
	$("#search").click(function(){		 
	 	var uname=$("#uname").val();
	 	
	 	$("#room").find("tr").remove().end();
	 	$("#room").append("<tr class='node'><th class=\"table-id\">姓名</th><th class=\"table-title\">手机号</th><th class=\"table-type\">房型</th><th class=\"table-set\">房号</th></tr>");
	 	$.post(
	 			"booknews2",
	 			{"uname":uname},
	 			function(data){
	 				
	 			var arr = JSON.parse(data);	
	 			var str = "";//定义用于拼接的字符串					
	 			for (var i = 0; i < arr.length; i++) {				
	 				//拼接表格的行和列			
	 				str = "<tr class='node'><td>" + arr[i].uname + "</td><td>" + arr[i].tel
	 						+ "</td><td>" + arr[i].roomtype + "</td><td>"+arr[i].roomid+"</td></tr>";
	 				//追加到table中
	 				$("#room").append(str);
	 			}
	 				
	 				
	 	},"text");
	 });  
	
});

</script>

</html>