<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>退房充值</title>
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet" href="layui\css\layui.css" media="all">
<link rel="icon" type="image/png" href="assets/i/favicon.png">
<link rel="apple-touch-icon-precomposed" href="assets/i/app-icon72x72@2x.png">
<meta name="apple-mobile-web-app-title" content="Amaze UI" />
<link rel="stylesheet" href="assets/css/amazeui.min.css" />
<link rel="stylesheet" href="assets/css/admin.css">
<link rel="stylesheet" href="assets/css/app.css">
<script type="text/javascript" src="/assets/js/jquery.min.js"></script>
</head>
<body>
	<header class="am-topbar am-topbar-inverse admin-header">
		<div class="am-topbar-brand">
			<a href="javascript:;" class="tpl-logo"> <img
				src="assets/img/logo.png" alt="">
			</a>
		</div>
		
		 <div class="am-collapse am-topbar-collapse" id="topbar-collapse">
            <ul class="am-nav am-nav-pills am-topbar-nav am-topbar-right admin-header-list tpl-header-list">
             <li><a href="login.html" class="tpl-header-list-link"><span class="am-icon-sign-out tpl-header-list-ico-out-size"></span></a></li>
            </ul>
        </div>
            
	</header>

	<div class="tpl-page-container tpl-page-header-fixed">
		<div class="tpl-left-nav tpl-left-nav-hover">
			<div class="tpl-left-nav-title">酒店系统</div>
			<div class="tpl-left-nav-list">
				<ul class="tpl-left-nav-menu">
					<li class="tpl-left-nav-item">
					<a href="javascript:;" class="nav-link tpl-left-nav-link-list active"> 
						<i class="am-icon-home"></i>
						 <span>入住退房</span>
						 <i class="am-icon-angle-right tpl-left-nav-more-ico am-fr am-margin-right tpl-left-nav-more-ico-rotate"></i>
					</a>
						<ul class="tpl-left-nav-sub-menu">
							<li><a href="form-lineboss.html"> 
							<i class="am-icon-angle-right"></i> 
							<span>入住登记</span>
							</a> 
							<a href="employee-seeboss.html" class="active"> 
							<i class="am-icon-angle-right"></i>
							<span>退房充值</span>
							</a>
							</li>
						</ul></li>
					<li class="tpl-left-nav-item">
					<a href="javascript:;" class="nav-link tpl-left-nav-link-list"> 
					<i class="am-icon-bar-chart"></i> 
					<span>房间管理</span>
					<i class="am-icon-angle-right tpl-left-nav-more-ico am-fr am-margin-right tpl-left-nav-more-ico-rotate"></i>
					</a>
					<ul class="tpl-left-nav-sub-menu">
							<li><a href="mainboss.html"> 
							<i class="am-icon-angle-right"></i> 
							<span>剩余房源</span>
							</a> 
							<a href="tupianboss.html"> 
							<i class="am-icon-angle-right"></i>
							<span>轮播管理</span>
							</a>
							<a href="uplodaImgboss.html"> 
							<i class="am-icon-angle-right"></i>
							<span>更新图片</span>
							</a></li>
						</ul></li>
					<li class="tpl-left-nav-item">
						<!-- 打开状态 a 标签添加 active 即可   --> 
						<a href="javascript:;" class="nav-link tpl-left-nav-link-list "> 
						<i class="am-icon-table"></i> 
						<span>会员管理</span> 
						<!-- 列表打开状态的i标签添加 tpl-left-nav-more-ico-rotate 图表即90°旋转  -->
						<i class="am-icon-angle-right tpl-left-nav-more-ico am-fr am-margin-right tpl-left-nav-more-ico-rotate"></i>
					</a>
					<ul class="tpl-left-nav-sub-menu">
							<li><a href="HuiYuanZhuCeboss.html"> 
							<i class="am-icon-angle-right"></i> 
							<span>会员注册</span>
							</a> 
							<a href="commentMannboss.html"> 
							<i class="am-icon-angle-right"></i>
							<span>会员评论</span>
							</a></li>
						</ul>
					</li>
					<li class="tpl-left-nav-item"><a href="chartboss.html"
						class="nav-link tpl-left-nav-link-list"> 
						<i class="am-icon-wpforms"></i> 
						<span>查看账目</span>
					</a></li>
					<li class="tpl-left-nav-item">
						<!-- 打开状态 a 标签添加 active 即可   --> 
						<a href="javascript:;" class="nav-link tpl-left-nav-link-list "> 
						<i class="am-icon-key"></i> 
						<span>员工管理</span> 
						<!-- 列表打开状态的i标签添加 tpl-left-nav-more-ico-rotate 图表即90°旋转  -->
						<i class="am-icon-angle-right tpl-left-nav-more-ico am-fr am-margin-right tpl-left-nav-more-ico-rotate"></i>
					</a>
					<ul class="tpl-left-nav-sub-menu">
							<li><a href="table-font-list3.html"> 
							<i class="am-icon-angle-right"></i> 
							<span>员工信息管理</span>
							</a> 
							<a href="boss-attendance.html"> 
							<i class="am-icon-angle-right"></i>
							<span>考勤统计</span>
							</a></li>
						</ul>
					</li>
				</ul>
			</div>
		</div>

		<div class="tpl-content-wrapper">
			<ol class="am-breadcrumb">
				<li><a href="index.html" class="am-icon-home">首页</a></li>
				<li><a href="#">入住退房</a></li>
				<li class="am-active">退房 充值</li>
			</ol>
			<div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
				<div class="layui-btn-group demoTable">
					<button class="layui-btn" data-type="getCheckData">获取选中行数据</button>
					<button class="layui-btn" data-type="getCheckLength">获取选中数目</button>
					<button class="layui-btn" data-type="isAll">验证是否全选</button>
				</div>

				<table class="layui-table"
					lay-data="{width:1200, height:400, cellMinWidth: 80, url:'employeedelServlet', page:true, id:'idTest'}"
					lay-filter="demo">
					<thead>
						<tr>
							<th lay-data="{type:'checkbox', fixed: 'left'}"></th>
							<th lay-data="{field:'id', width:60, sort: true, fixed: true}">ID</th>
							<th lay-data="{field:'name', width:80}">用户名</th>
							<th lay-data="{field:'date_reside', width:150, sort: true}">入住时间</th>
							<th lay-data="{field:'date_leave', width:150}">离开时间</th>
							<th lay-data="{field:'idcard', width:170}">身份证号码</th>
							<th lay-data="{field:'money', width:110, sort: true}">账户余额</th>

							<th lay-data="{field:'tel', width:110}">联系方式</th>
							<th lay-data="{field:'type', width:115, sort: true}">住房类型</th>
							<th
								lay-data="{field:'roomnum', width:90, sort: true, fixed: 'right'}">房间号</th>
							<th
								lay-data="{fixed: 'right', width:130, align:'center', toolbar: '#barDemo'}"></th>
						</tr>
					</thead>
				</table>

			</div>
		</div>
	</div>
	
	<script src="layui/layui.js" charset="utf-8"></script>
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/amazeui.min.js"></script>
	<script src="assets/js/app.js"></script>

	<script type="text/html" id="barDemo">
  <a class="layui-btn layui-btn-xs" lay-event="edit">充值</a>
  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">退房</a>
</script>
	
	<script>
		layui
				.use(
						'table',
						function() {
							var table = layui.table;
							//监听表格复选框选择
							table.on('checkbox(demo)', function(obj) {
								console.log(obj)
							});
							//监听工具条
							table.on('tool(demo)', function(obj) {
								var data = obj.data;
								if (obj.event === 'detail') {
									layer.msg('ID：' + data.id + ' 的查看操作');
								} else if (obj.event === 'del') {
									layer.confirm('真的删除行么', function(index) {
										var userid = data.id;
										var roomid = data.roomnum;

										obj.del();

										$.ajax({//异步请求返回给后台
											url : 'tuifangServlet',//servlet 
											type : 'POST',
											data : {
												'userid' : userid,
												'roomid' : roomid
											},
											dataType : 'text',

											success : function(data) {
												alert(data);
											},
											error : function(data) {
												alert(data)
											}
										});

										layer.close(index);
									});
								} else if (obj.event === 'edit') {

									//例子2
									layer.prompt({
										formType : 0,
										value : '',
										title : '请输入充钱数目',
										area : [ '800px', '350px' ]
									//自定义文本域宽高
									}, function(value, index, elem) {
										// alert(value); //得到value
										var userid = data.id;

										$.ajax({//异步请求返回给后台
											url : 'addMoneyServlet',
											type : 'POST',
											data : {
												'userid' : userid,
												'money' : value
											},
											dataType : 'text',
											success : function(data) {
												alert("成功！！");
											},
											error : function(data) {
												alert("失败！！");
											}
										});

										var num1 = parseInt(value);
										var num2 = parseInt(data.money);
										var num = num1 + num2;
										obj.update({
											money : num
										});
										layer.close(index);
									});
								}
							});

							var $ = layui.$, active = {
								getCheckData : function() { //获取选中数据
									var checkStatus = table
											.checkStatus('idTest'), data = checkStatus.data;
									layer.alert(JSON.stringify(data));
								},
								getCheckLength : function() { //获取选中数目
									var checkStatus = table
											.checkStatus('idTest'), data = checkStatus.data;
									layer.msg('选中了：' + data.length + ' 个');
								},
								isAll : function() { //验证是否全选
									var checkStatus = table
											.checkStatus('idTest');
									layer.msg(checkStatus.isAll ? '全选' : '未全选')
								}
							};

							$('.demoTable .layui-btn').on('click', function() {
								var type = $(this).data('type');
								active[type] ? active[type].call(this) : '';
							});
						});
	</script>

</body>
</html>