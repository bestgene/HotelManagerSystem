<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>预定房间</title>
		<link rel="stylesheet" href="/HotelManagerSystem/face-user/css/booknew.css" />
		<link rel="stylesheet" href="/HotelManagerSystem/face-user/layui/css/layui.css"  media="all">
		<script src="/HotelManagerSystem/js/jquery.min.js"></script>
		<script src="/HotelManagerSystem/face-user/layui/layui.js"></script>
		<script src="/HotelManagerSystem/js/jquery.1.7.2.min.js"></script>
		<script src="/HotelManagerSystem/js/mobiscroll_002.js" type="text/javascript"></script>
		<script src="/HotelManagerSystem/js/mobiscroll_004.js" type="text/javascript"></script>
		<link href="/HotelManagerSystem/css/mobiscroll_002.css" rel="stylesheet" type="text/css">
		<link href="/HotelManagerSystem/css/mobiscroll.css" rel="stylesheet" type="text/css">
		<script src="/HotelManagerSystem/js/mobiscroll.js" type="text/javascript"></script>
		<script src="/HotelManagerSystem/js/mobiscroll_003.js" type="text/javascript"></script>
		<script src="/HotelManagerSystem/js/mobiscroll_005.js" type="text/javascript"></script>
		<link href="/HotelManagerSystem/css/mobiscroll_003.css" rel="stylesheet" type="text/css">
	</head>
	<body>
	<div id="wrapper">		<ul>
			<li>预定信息</li>
			<li id="roomtype" th:value="${houseType.house_type_id}">房型：<label th:text="${houseType.house_type_name}" id="houseName"></label></li>
			<li>剩余房间数：<label th:text="${houseType.num}" id="houseNumber"></label></li>
			<hr/>
			<li>入住信息</li>
			<li>
				
				<label>入住人姓名&nbsp;</label><input type="text" id="uname"><br>
				<label>手机号&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label><input type="text" id="tel"><br>
				<label>入住时间&nbsp;&nbsp;&nbsp;&nbsp;</label><input type="text" id="startTime" th:value="${date.startTime}" disabled="disabled"><br>
       			<label>离房时间&nbsp;&nbsp;&nbsp;&nbsp;</label><input type="text" id="endTime" th:value="${date.endTime}" disabled="disabled"><br>
       			<div class="content">
				    <div class="demos">
				        <label for="appDateTime">预计离开&nbsp;&nbsp;&nbsp;&nbsp;</label>
				        <input th:value="${date.endTime}" class="" readonly="readonly" name="appDateTime" id="appDateTime" type="text">
				    </div>
				</div>
       			<label>数量&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label><input type="text" id="tel"><br>
			<input type="button" name="" id="btn" value="提交订单" />
			</li>
		</ul>
		</div>
		
<script type="text/javascript">
layui.use('laydate', function(){
	  var laydate = layui.laydate;
	  laydate.render({
		    elem: '#test6'
		    ,range: true,
		    min: 0,
		  
			done: function(value){
		         //得到日期生成的值，如：2017-08-18
				$("#btn").click(function () {
					debugger;
						var typeid=$("#roomtype").val();
						var uname=$("#uname").val();
						var tel=$("#tel").val();	
						$.get(
						"../booknews",
						{"typeid":typeid,"uname":uname,"tel":tel,"date":value},
						function(data) {
							 if (data=="预定成功！") {
								alert(data);					
								location.href = "index.html";
							}else {
								alert("此类房间已经售空！");
								location.href = "index.html";
							} 
							
							
							
						});
					});
		         
		         
		      }
		    
		  });
	});
</script>
<script type="text/javascript">
        $(function () {
			var currYear = (new Date()).getFullYear();	
			var opt={};
			opt.date = {preset : 'date'};
			opt.datetime = {preset : 'datetime'};
			opt.time = {preset : 'time'};
			opt.default = {
				theme: 'android-ics light', //皮肤样式
		        display: 'modal', //显示方式 
		        mode: 'scroller', //日期选择模式
				dateFormat: 'yyyy-mm-dd',
				lang: 'zh',
				showNow: true,
				nowText: "今天",
		        startYear: currYear - 10, //开始年份
		        endYear: currYear + 10 //结束年份
			};

		  	$("#appDate").mobiscroll($.extend(opt['date'], opt['default']));
		  	var optDateTime = $.extend(opt['datetime'], opt['default']);
		  	var optTime = $.extend(opt['time'], opt['default']);
		    $("#appDateTime").mobiscroll(optDateTime).datetime(optDateTime);
		    $("#appTime").mobiscroll(optTime).time(optTime);
        });
</script>
  </body>
</html>